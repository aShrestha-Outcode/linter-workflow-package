#!/bin/sh
# .husky/pre-commit
# Fast pre-commit checks: formatting staged files only

set -e

echo "ğŸš€ Running pre-commit checks..."

# Check branch protection first (prevents commits to protected branches)
if [ -f ".husky/pre-commit-branch-protection" ]; then
  if ! . .husky/pre-commit-branch-protection; then
    exit 1
  fi
fi

echo "ğŸš€ Running pre-commit quality checks..."

# Format staged Dart files using lint-staged
npx --no-install lint-staged || {
  echo "âŒ Pre-commit checks failed. Please fix the issues above."
  exit 1
}

echo "âœ… Pre-commit checks passed."
